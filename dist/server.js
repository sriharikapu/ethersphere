!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t){e.exports=require("bluebird")},function(e,t){e.exports=require("winston")},function(e,t){e.exports=require("mongoose")},function(e,t,n){"use strict";var r=n(8),o=n(9),s=void 0;void 0===s&&(s=null);var u=process.env.ROOT_DIR||s||process.env.PWD||process.cwd(),a=r.resolve(u,".env");n(4).config({path:a}),e.exports=Object.assign({},o,{APP_HOST:process.env.APP_HOST||"http://localhost:3000",NODE_HOST:process.env.NODE_HOST||"127.0.0.1",APP_ROOT:u,ROOT_DIR:u,APP_PORT:process.env.PORT||3e3,DEBUG:function(){if("production"===process.env.NODE_ENV)return!1;if(void 0!==process.env.DEBUG)return!!process.env.DEBUG;return!0}(),MONGO_URI:process.env.MONGO_URI||"mongodb://mongo/app",MONGO_TEST_URI:process.env.MONGO_TEST_URI||"mongodb://mongo/app_test",MONGO_USERNAME:process.env.MONGO_USERNAME,MONGO_PASSWORD:process.env.MONGO_PASSWORD,REDIS_URI:process.env.REDIS_URI||"redis://redis:6379/0",ETHEREUM_NODE_URL:process.env.ETHEREUM_NODE_URL||"https://mainnet.infura.io"})},function(e,t){e.exports=require("dotenv")},function(e,t){e.exports=require("regenerator-runtime/runtime")},function(e,t){e.exports=require("chalk")},function(e,t){e.exports=require("sequelize")},function(e,t){e.exports=require("path")},function(e,t,n){"use strict";e.exports={}},function(e,t){e.exports=require("ioredis")},function(e,t){e.exports=require("web3")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.redis=void 0,n(5);var r=_(n(13)),o=_(n(6)),s=_(n(15)),u=_(n(16)),a=_(n(17)),i=(_(n(7)),_(n(18))),c=_(n(1)),l=_(n(19)),f=_(n(2)),d=_(n(0)),p=n(20),h=_(n(3)),v=_(n(10)),m=_(n(21));function _(e){return e&&e.__esModule?e:{default:e}}c.default.configure({transports:[new c.default.transports.Console({formatter:function(e){var t=e.message,n=e.level;return("info"===n?"":n+": ")+t}})]}),f.default.connect(h.default.MONGO_URI,{useMongoClient:!0}),f.default.Promise=d.default;var b=e.exports=(0,s.default)();b.enable("trust proxy");t.redis=new v.default(h.default.REDIS_URI);b.use(i.default.json({limit:"30mb"})),b.use(i.default.urlencoded({extended:!1}));var g=(0,a.default)(u.default);b.use((0,u.default)({secret:"nfy06nf!mX4hd8",store:new g({mongooseConnection:f.default.connection}),resave:!1,saveUninitialized:!0,cookie:{path:"/",httpOnly:!0,secure:!1,maxAge:null}})),n(22),n(27),c.default.configure({transports:[new c.default.transports.Console({handleExceptions:!0,humanReadableUnhandledException:!0,formatter:function(e){var t=e.message,n=e.level,r="";return"info"===n?r=o.default.blue("[info]"):"warn"===n?r=o.default.yellow("[warn]"):"error"===n&&(r=o.default.red("[error]")),r+" "+t}})]}),h.default.DEBUG||b.use(l.default.logger({winstonInstance:c.default})),b.use(s.default.static(h.default.APP_ROOT+"/public")),b.get("*",function(e,t){var n={app:{user:e.user}};t.send((0,p.renderToString)(r.default.createElement(m.default,{preloadedState:n,path:e.path})))}),b.listen(h.default.APP_PORT,"0.0.0.0",function(){c.default.info("\n============================================================================\nΞTHΞRSPHΞRΞ\n============================================================================\n\nEnvironment variables:\nNODE_ENv:  "+process.env.NODE_ENV+"\n__dirname: "+__dirname+"\ncwd:       "+process.cwd()+"\n\nSettings:\nAPP_ROOT:  "+h.default.APP_ROOT+"\nAPP_PORT: "+h.default.APP_PORT+"\nDEBUG:     "+h.default.DEBUG+"\nROOT_DIR   "+h.default.ROOT_DIR+"\n  "),c.default.info(o.default.white.bgGreen.bold("App listening on port "+h.default.APP_PORT+"!"))}),b.use(l.default.errorLogger({winstonInstance:c.default}))},function(e,t){e.exports=require("react")},function(e,t,n){"use strict";n(12)},function(e,t){e.exports=require("express")},function(e,t){e.exports=require("express-session")},function(e,t){e.exports=require("connect-mongo")},function(e,t){e.exports=require("body-parser")},function(e,t){e.exports=require("express-winston")},function(e,t){e.exports=require("react-dom/server")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(13),s=(r=o)&&r.__esModule?r:{default:r};t.default=function(e){var t=e.preloadedState;return e.path,s.default.createElement("html",{lang:"en-US"},s.default.createElement("head",null,s.default.createElement("meta",{charSet:"utf-8"}),s.default.createElement("link",{rel:"stylesheet",href:"/styles.css"}),s.default.createElement("link",{rel:"shortcut icon",type:"image/png",href:"/img/icon_32x32.png?v=4",sizes:"32x32"}),s.default.createElement("link",{rel:"shortcut icon",type:"image/png",href:"/img/icon_16x16.png?v=4",sizes:"16x16"}),s.default.createElement("title",null,"Ξthersphere"),s.default.createElement("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=0"}),s.default.createElement("script",{src:"/vendor/keythereum.min.js"}),s.default.createElement("script",{src:"https://api.tiles.mapbox.com/mapbox-gl-js/v0.44.1/mapbox-gl.js"}),s.default.createElement("link",{href:"https://api.tiles.mapbox.com/mapbox-gl-js/v0.44.1/mapbox-gl.css",rel:"stylesheet"})),s.default.createElement("body",null,s.default.createElement("div",{id:"app"}),s.default.createElement("script",{dangerouslySetInnerHTML:{__html:"\n          window.__PRELOADED_STATE__ = "+JSON.stringify(t).replace(/</g,"\\u003c")+";\n          "}}),s.default.createElement("script",{src:"/vendor/three.js/js/three.min.js"}),s.default.createElement("script",{src:"/vendor/three.js/js/OBJLoader.js"}),s.default.createElement("script",{src:"/vendor/three.js/js/MTLLoader.js"}),s.default.createElement("script",{src:"/bundle.js"})))}},function(e,t,n){(function(t){var r=this&&this.__awaiter||function(e,n,r,o){return new(r||(r=t))(function(t,s){function u(e){try{i(o.next(e))}catch(e){s(e)}}function a(e){try{i(o.throw(e))}catch(e){s(e)}}function i(e){e.done?t(e.value):new r(function(t){t(e.value)}).then(u,a)}i((o=o.apply(e,n||[])).next())})},o=this&&this.__generator||function(e,t){var n,r,o,s,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(o=r[2&s[0]?"return":s[0]?"throw":"next"])&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[0,o.value]),s[0]){case 0:case 1:o=s;break;case 4:return u.label++,{value:s[1],done:!1};case 5:u.label++,r=s[1],s=[0];continue;case 7:s=u.ops.pop(),u.trys.pop();continue;default:if(!(o=(o=u.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){u=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){u.label=s[1];break}if(6===s[0]&&u.label<o[1]){u.label=o[1],o=s;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(s);break}o[2]&&u.ops.pop(),u.trys.pop();continue}s=t.call(e,u)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}};n(4).config();n(23),n(11).utils,n(24),n(25).soliditySHA3,new(n(26))("https://mainnet.infura.io:443");var s=null;function u(){return r(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return[4,function(){return r(this,void 0,void 0,function(){return o(this,function(e){return[2]})})}()];case 1:return e.sent(),[2]}})})}u(),e.exports={init:u,getInstance:function(){return s},getData:function(e){return r(this,void 0,void 0,function(){var t;return o(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,s.myMethod.call(e.something)];case 1:return[2,n.sent()];case 2:return t=n.sent(),console.error(t),[2,[]];case 3:return[2]}})})}}}).call(t,n(0))},function(e,t){e.exports=require("truffle-contract")},function(e,t){e.exports=require("pify")},function(e,t){e.exports=require("ethereumjs-abi")},function(e,t){e.exports=require("web3-providers-http")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){var t=n(12),r=n.n(t),o=n(28),s=this&&this.__awaiter||function(t,n,r,o){return new(r||(r=e))(function(e,s){function u(e){try{i(o.next(e))}catch(e){s(e)}}function a(e){try{i(o.throw(e))}catch(e){s(e)}}function i(t){t.done?e(t.value):new r(function(e){e(t.value)}).then(u,a)}i((o=o.apply(t,n||[])).next())})},u=this&&this.__generator||function(e,t){var n,r,o,s,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(o=r[2&s[0]?"return":s[0]?"throw":"next"])&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[0,o.value]),s[0]){case 0:case 1:o=s;break;case 4:return u.label++,{value:s[1],done:!1};case 5:u.label++,r=s[1],s=[0];continue;case 7:s=u.ops.pop(),u.trys.pop();continue;default:if(!(o=(o=u.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){u=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){u.label=s[1];break}if(6===s[0]&&u.label<o[1]){u.label=o[1],o=s;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(s);break}o[2]&&u.ops.pop(),u.trys.pop();continue}s=t.call(e,u)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}};r.a.post("/api/messages/new",function(e,t){return s(this,void 0,void 0,function(){var n,r,s;return u(this,function(u){switch(u.label){case 0:n=e.body,console.log(e.body),u.label=1;case 1:return u.trys.push([1,3,,4]),[4,o.a.create(n)];case 2:return r=u.sent(),[2,t.status(200).send(r)];case 3:throw s=u.sent(),Error(s.message);case 4:return[2]}})})}),r.a.get("/api/messages/all",function(e,t){return s(this,void 0,void 0,function(){var e,n;return u(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,o.a.find().lean().exec()];case 1:return e=r.sent(),[2,t.status(200).send(e)];case 2:throw n=r.sent(),Error(n.message);case 3:return[2]}})})})}.call(t,n(0))},function(e,t,n){"use strict";var r=n(2),o=n.n(r),s=new o.a.Schema({lat:Number,lng:Number,message:String});t.a=o.a.model("Message",s)}]);